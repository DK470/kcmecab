<!doctype html>
<html>
    <head>
        <script type="module">
            import Mecab from "https://unpkg.com/mecab-wasm@1.0.3/lib/mecab.js";

            async function handleQuery() {
                const params = new URLSearchParams(window.location.search);
                const inputText = params.get("text"); // Accept text via the `text` query parameter

                if (inputText) {
                    const result = await Mecab.query(inputText);
                    document.body.innerHTML = JSON.stringify(result); // Output JSON response
                } else {
                    document.body.innerHTML = JSON.stringify({ error: "No text provided" });
                }
            }

            // Initialize MeCab and process query
            window.addEventListener("load", async () => {
                await Mecab.waitReady();
                await handleQuery();
            });
        </script>
    </head>
    <body>
        <!-- Output will appear here -->
    </body>
</html>
