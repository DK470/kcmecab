<!doctype html>
<html>
    <head>
        <script type="module">
            import Mecab from "https://unpkg.com/mecab-wasm@1.0.3/lib/mecab.js";

            async function initializeMecab() {
                try {
                    await Mecab.waitReady();
                    console.log("MeCab is ready.");
                    await handleQuery();
                } catch (error) {
                    console.error("Error initializing MeCab:", error);
                    alert("Failed to initialize MeCab.");
                }
            }

            async function handleQuery() {
                const params = new URLSearchParams(window.location.search);
                const inputText = params.get("text");

                if (inputText) {
                    try {
                        const result = await Mecab.query(inputText);
                        console.log("MeCab query result:", result);
                        document.body.innerHTML = JSON.stringify(result);
                    } catch (error) {
                        document.body.innerHTML = "Error querying MeCab: " + error.message;
                    }
                } else {
                    document.body.innerHTML = JSON.stringify({ error: "No text provided" });
                }
            }

            window.addEventListener("load", initializeMecab);
        </script>
    </head>
    <body>
        <!-- Your content here -->
    </body>
</html>
